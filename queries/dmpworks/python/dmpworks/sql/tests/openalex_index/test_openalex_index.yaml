test_openalex_index_openalex_index:
  model: openalex_index.openalex_index
  inputs:
    openalex_index.works_metadata:
      rows:
        - id: "W0000000001"
          doi: "10.9999/test.0001"
          is_primary_doi: true
        - id: "W0000000002"
          doi: "10.9999/test.0002"
          is_primary_doi: true
        - id: "W0000000003"
          doi: "10.9999/test.0003"
          is_primary_doi: false
        - id: "W0000000004"
          doi: "10.9999/test.0003"
          is_primary_doi: true
    openalex.works:
      rows:
        - id: "W0000000001"
          doi: "10.9999/test.0001"
          type: "article"
          publication_date: "2024-01-01"
          publication_venue: "Physics"
          institutions:
            - name: "National Aeronautics and Space Administration"
              ror: "027ka1x80"
          authors:
            - first_initial: "I"
              given_name: "Isaac"
              middle_initials: null
              middle_names: null
              surname: "Newton"
              full: "Isaac Newton"
              orcid: "0000-0000-0000-0001"
        - id: "W0000000002"
          doi: "10.9999/test.0002"
          type: "dataset"
          publication_date: "2025-01-01"
          publication_venue: "Physics"
          institutions:
            - name: "Los Alamos National Laboratory"
              ror: "01e41cf67"
          authors:
            - first_initial: "A"
              given_name: "Albert"
              middle_initials: null
              middle_names: null
              surname: "Einstein"
              full: "Albert Einstein"
              orcid: "0000-0000-0000-001X"
        - id: "W0000000003"
          doi: "10.9999/test.0003"
          type: "dataset"
          publication_date: "2025-01-02"
          publication_venue: null
          institutions: [ ]
          authors: [ ]
        - id: "W0000000004"
          doi: "10.9999/test.0003"
          type: null
          publication_date: "2025-01-03"
          publication_venue: null
          institutions:
            - name: "Los Alamos National Laboratory"
              ror: "01e41cf67"
          authors:
            - first_initial: "A"
              given_name: "Albert"
              middle_initials: null
              middle_names: null
              surname: "Einstein"
              full: "Albert Einstein"
              orcid: "0000-0000-0000-001X"

    openalex_index.titles:
      rows:
        - doi: "10.9999/test.0001"
          title: "Title 1"
        - doi: "10.9999/test.0002"
          title: "Title 2"
    openalex_index.abstracts:
      rows:
        - doi: "10.9999/test.0001"
          abstract: "Abstract 1"
        - doi: "10.9999/test.0002"
          abstract: "Abstract 2"
    openalex_index.updated_dates:
      rows:
        - doi: "10.9999/test.0001"
          updated_date: "2024-02-01 00:00:00"
        - doi: "10.9999/test.0002"
          updated_date: "2025-02-01 00:00:00"
    openalex_index.funders:
      rows:
        - id: "W0000000001"
          doi: "10.9999/test.0001"
          funders:
            - name: "National Science Foundation"
              ror: "021nxhr62"
        - id: "W0000000002"
          doi: "10.9999/test.0002"
          funders:
            - name: "National Science Foundation"
              ror: "021nxhr62"
        - id: "W0000000004"
          doi: "10.9999/test.0003"
          funders:
            - name: "National Science Foundation"
              ror: "021nxhr62"
    openalex_index.awards:
      rows:
        - doi: "10.9999/test.0001"
          awards:
            - award_id: "1"
        - doi: "10.9999/test.0002"
          awards:
            - award_id: "2"

  outputs:
    query:
      rows:
        - doi: "10.9999/test.0001"
          title: "Title 1"
          abstract_text: "Abstract 1"
          work_type: "ARTICLE"
          publication_date: "2024-01-01"
          updated_date: "2024-02-01 00:00:00"
          publication_venue: "Physics"
          institutions:
            - name: "National Aeronautics and Space Administration"
              ror: "027ka1x80"
          authors:
            - first_initial: "I"
              given_name: "Isaac"
              middle_initials: null
              middle_names: null
              surname: "Newton"
              full: "Isaac Newton"
              orcid: "0000-0000-0000-0001"
          funders:
            - name: "National Science Foundation"
              ror: "021nxhr62"
          awards:
            - award_id: "1"
          source:
            name: "OpenAlex"
            url: "https://openalex.org/works/W0000000001"
        - doi: "10.9999/test.0002"
          title: "Title 2"
          abstract_text: "Abstract 2"
          work_type: "DATASET"
          publication_date: "2025-01-01"
          updated_date: "2025-02-01 00:00:00"
          publication_venue: "Physics"
          institutions:
            - name: "Los Alamos National Laboratory"
              ror: "01e41cf67"
          authors:
            - first_initial: "A"
              given_name: "Albert"
              middle_initials: null
              middle_names: null
              surname: "Einstein"
              full: "Albert Einstein"
              orcid: "0000-0000-0000-001X"
          funders:
            - name: "National Science Foundation"
              ror: "021nxhr62"
          awards:
            - award_id: "2"
          source:
            name: "OpenAlex"
            url: "https://openalex.org/works/W0000000002"
        - doi: "10.9999/test.0003"
          title: null
          abstract_text: null
          work_type: "OTHER"
          publication_date: "2025-01-03"
          updated_date: null
          publication_venue: null
          institutions:
            - name: "Los Alamos National Laboratory"
              ror: "01e41cf67"
          authors:
            - first_initial: "A"
              given_name: "Albert"
              middle_initials: null
              middle_names: null
              surname: "Einstein"
              full: "Albert Einstein"
              orcid: "0000-0000-0000-001X"
          funders:
            - name: "National Science Foundation"
              ror: "021nxhr62"
          awards: [ ]
          source:
            name: "OpenAlex"
            url: "https://openalex.org/works/W0000000004"


